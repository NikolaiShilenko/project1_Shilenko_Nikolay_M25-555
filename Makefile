# Установка зависимостей проекта в виртуальное окружение
# Используется при первом клонировании репозитория
install:
	poetry install

# Запуск игры через Poetry
# Использует виртуальное окружение проекта для гарантии правильных зависимостей
# 'project' - это имя консольной команды, определенной в pyproject.toml в секции [tool.poetry.scripts]
project:
	poetry run project

# Сборка пакета - создает .whl и .tar.gz файлы в папке dist/
# Подготавливает пакет для публикации или локальной установки
build:
	poetry build

# Тестовая публикация пакета (без реальной отправки в PyPI)
# Проверяет что пакет правильно собран и готов к публикации
publish:
	poetry publish --dry-run

# Установка собранного пакета в систему
# Автоматически определяет ОС и использует правильный синтаксис путей
package-install:
ifeq ($(OS),Windows_NT)
    # Для Windows: находим все .whl файлы в папке dist и устанавливаем их
    # %%i - переменная цикла, содержит путь к найденному .whl файлу
    # Кавычки вокруг %%i защищают от пробелов в путях
	for %%i in (dist\*.whl) do python -m pip install "%%i"
else
    # Для Linux/Mac: используем wildcard для установки любого .whl файла
	python3 -m pip install dist/*.whl
endif


